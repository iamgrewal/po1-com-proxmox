[global]
keyboard = "en-us"
country = "us"
fqdn = "pve.po1.me"
domain = "po1.me"
mailto = "proxmox@po1.me"
timezone = "America/Detroit"
# Consider using a stronger password for production environments
root_password = "passw0rd"
root_ssh_keys = [
  "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIG+JRLgkEBRWE1TqovJIikP32l5jqXhnAU8yzdta1/Ph Generated By Termius"
]
auto_install = true
reboot_on_error = true

[network]
# Default DHCP just to bootstrap; postinstall script replaces it
source = "from-dhcp"
dns = ["192.168.51.1", "172.64.36.1", "172.64.36.2"]
[disk_setup]
# Note: pre-installv2.sh has its own disk detection mechanism that may override this
# If you have specific disk requirements, ensure they match with pre-installv2.sh behavior
target_hd = "/dev/sda"
filesystem = "zfs"
zfs = { raid = "raid0", ashift = 12, compress = "lz4", copies = 1 }

efi_size = "1G"      # EFI system partition
boot_size = "2G"     # /boot partition
hdsize = "120G"      # Total disk space to use (optional, limits install scope)

swap_size = "8G"   

[packages]
packages = [
  "nano", "git", "sudo", "curl", "wget", "net-tools", "openssh-server",
  "lvm2", "zfsutils-linux", "qemu-guest-agent", "nfs-common", "rsync",
  "lsof", "iftop", "htop", "iotop"
]

[scripts]
# These scripts execute automatically during install and post-install
preinstall = "https://raw.githubusercontent.com/iamgrewal/po1-com-proxmox/refs/heads/main/pre-installv2.sh"
# Using the non-interactive version of the installation script
# Parameters: <node_name> <node_ip> <subnet_mask> <interface_name>
postinstall = "https://raw.githubusercontent.com/iamgrewal/po1-com-proxmox/refs/heads/main/install_in_place_bookworm_auto.sh pve.po1.me 192.168.51.200 255.255.255.0 eth0"
# Using the non-interactive version of the network setup script
# Pass parameter 1 to select Linux Bridge configuration (default)
# Pass parameter 2 to select OVS Bridge configuration
# Pass parameter 3 to select Single Node with NAT configuration
postreboot = "https://raw.githubusercontent.com/iamgrewal/po1-com-proxmox/refs/heads/main/network_setup_auto.sh 1"
# Script to remove subscription nag from Proxmox UI
postreboot2 = "https://raw.githubusercontent.com/iamgrewal/po1-com-proxmox/refs/heads/main/remove_nag.sh"

[first-boot]
source = "from-iso"
ordering = "before-network"
